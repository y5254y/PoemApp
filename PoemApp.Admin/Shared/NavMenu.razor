@using MudBlazor

<MudNavMenu>
    <MudText Typo="Typo.h6" Class="px-4 py-2">管理菜单</MudText>

    <MudNavLink T="string" Href="/" Match="NavLinkMatch.Prefix">
        <MudIcon Icon="Icons.Material.Filled.Dashboard" Class="me-3" />
        <MudText>仪表板</MudText>
    </MudNavLink>

    <MudNavGroup T="string" Text="内容管理" Icon="Icons.Material.Filled.LibraryBooks" Expanded="true">
        <MudNavLink T="string" Href="/poems" Match="NavLinkMatch.Prefix">
            <MudText>诗文管理</MudText>
        </MudNavLink>
        <MudNavLink T="string" Href="/authors" Match="NavLinkMatch.Prefix">
            <MudText>作者管理</MudText>
        </MudNavLink>
        <MudNavLink T="string" Href="/categories" Match="NavLinkMatch.Prefix">
            <MudText>分类管理</MudText>
        </MudNavLink>
    </MudNavGroup>

    <MudNavGroup T="string" Text="用户管理" Icon="Icons.Material.Filled.People" Expanded="true">
        <MudNavLink T="string" Href="/users" Match="NavLinkMatch.Prefix">
            <MudText>用户管理</MudText>
        </MudNavLink>
        <MudNavLink T="string" OnClick="Logout">
            <MudIcon Icon="Icons.Material.Filled.ExitToApp" Class="me-3" />
            <MudText>注销</MudText>
        </MudNavLink>
    </MudNavGroup>
</MudNavMenu>

@code {
    [Inject] private NavigationManager Navigation { get; set; } = null!;
    [Inject] private IAdminAuthService AuthService { get; set; } = null!;

    private async void Logout()
    {
        await AuthService.LogoutAsync();
        Navigation.NavigateTo("/Account/Login", forceLoad: true);
    }
}